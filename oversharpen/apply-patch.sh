#!/sbin/sh
# Oversharpening Mod for LG G3 by Skin1980 @xda
#

# Move sed binary to /sbin

mv /tmp/sed /sbin/
chmod 755 /sbin/sed
chmod 755 /tmp/mkbootimg
chmod 755 /tmp/unpackbootimg


# Dump kernel to tmp folder

dd if=/dev/block/platform/msm_sdcc.1/by-name/boot of=/tmp/original-boot.img

#Applying new value for sharpening

VALUE=`cat /tmp/aroma/sharp.prop`

if [ $VALUE == "selected.0=1" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x00/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=2" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x01/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=3" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x02/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=4" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x03/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=5" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x04/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=6" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x05/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=7" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x06/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=8" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x07/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=9" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x08/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=10" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x09/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=11" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x10/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=12" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x11/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=13" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x12/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=14" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x13/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=15" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x14/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=16" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x15/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=17" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x16/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=18" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x17/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=19" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x18/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=20" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x19/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=21" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x20/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=22" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x21/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=23" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x22/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=24" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x23/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=25" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x24/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=26" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x25/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=27" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x26/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=28" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x27/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=29" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x28/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=30" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x29/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=31" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x30/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=32" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x31/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=33" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x32/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=34" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x33/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=35" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x34/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=36" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x35/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=37" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x36/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=38" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x37/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=39" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x38/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=40" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x39/g' /tmp/original-boot.img
elif [ $VALUE == "selected.0=41" ]; then
sed -i 's/\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00./\x39\x01\x00\x00\x00\x00\x04\xF2\x01\x00\x40/g' /tmp/original-boot.img
else
echo "Wrong value!"
fi

#Bump the kernel

/tmp/livebump.sh

#Cleaning boot partition

dd if=/dev/zero of=/dev/block/platform/msm_sdcc.1/by-name/boot 

#Flashing back the kernel

dd if=/tmp/image_bumped.img of=/dev/block/platform/msm_sdcc.1/by-name/boot 


# Finished
# Have a nice day.
# Skin1980



